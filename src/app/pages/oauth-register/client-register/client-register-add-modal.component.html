<div>
  <form nz-form [formGroup]="validateForm" (ngSubmit)="_submitForm($event,validateForm.value)">
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="name" nz-form-item-required>名称</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-input [nzSize]="'large'" formControlName="name" [nzId]="'name'"></nz-input>
        <div nz-form-explain *ngIf="getFormControl('name').dirty&&getFormControl('name').hasError('required')">请输入名称!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="authorizedGrantTypes" nz-form-item-required>认证方式</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-select formControlName="authorizedGrantTypes" [nzSize]="'large'" [nzPlaceHolder]="'请选择'" [nzMode]="'multiple'" [(ngModel)]="selectedGrantTypes"
          (ngModelChange)="authorizedGrantTypesChange($event)">
          <nz-option *ngFor="let option of grantTypesOptions" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
        </nz-select>
        <div nz-form-explain *ngIf="getFormControl('authorizedGrantTypes').dirty&&getFormControl('authorizedGrantTypes').hasError('required')">请选择认证方式!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="resourceIds" nz-form-item-required>访问资源</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-select formControlName="resourceIds" [nzSize]="'large'" [nzPlaceHolder]="'请选择'" [nzMode]="'multiple'">
          <nz-option *ngFor="let option of resourceOptions" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
        </nz-select>
        <div nz-form-explain *ngIf="getFormControl('resourceIds').dirty&&getFormControl('resourceIds').hasError('required')">请选择可访问资源!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="scope" nz-form-item-required>访问范围</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-checkbox-group formControlName="scope"></nz-checkbox-group>
        <div nz-form-explain *ngIf="getFormControl('scope').dirty&&getFormControl('scope').hasError('required')">请选择访问范围!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="authorities" nz-form-item-required>角色</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-select formControlName="authorities" [nzSize]="'large'" [nzPlaceHolder]="'请选择'" [nzMode]="'multiple'">
          <nz-option *ngFor="let option of authorityOptions" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
        </nz-select>
        <div nz-form-explain *ngIf="getFormControl('authorities').dirty&&getFormControl('authorities').hasError('required')">请选择角色权限!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="webServerRedirectUri" *ngIf="isNeedCallbackURL" nz-form-item-required>回调URL</label>
        <label for="webServerRedirectUri" *ngIf="!isNeedCallbackURL">回调URL</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-input [nzSize]="'large'" formControlName="webServerRedirectUri" [nzId]="'webServerRedirectUri'"></nz-input>
        <div nz-form-explain *ngIf="this.isNeedCallbackURL&&!getFormControl('webServerRedirectUri').value">请输入回调URL!</div>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="accessTokenValidity" nz-form-item-required>token有效时间</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-input-number formControlName="accessTokenValidity" [nzMin]="1" [nzMax]="500000000" [nzStep]="1"></nz-input-number>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="refreshTokenValidity" nz-form-item-required>刷新token时间</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-input-number formControlName="refreshTokenValidity" [nzMin]="1" [nzMax]="999999999" [nzStep]="1"></nz-input-number>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="additionalInformation">附加字段</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-input [nzSize]="'large'" formControlName="additionalInformation" [nzId]="'additionalInformation'" [nzRows]="2" [nzType]="'textarea'"
          [nzPlaceHolder]="'附加字段'" [nzSize]="'large'"></nz-input>
      </div>
    </div>
    <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label for="accessTokenValautoapprovedity">自动Approval</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback>
        <nz-switch formControlName="accessTokenValautoapprovedity">
          <span checked>开</span>
          <span unchecked>关</span>
        </nz-switch>
      </div>
    </div>
  </form>
  <div class="customize-footer">
    <button nz-button [nzType]="'default'" [nzSize]="'large'" (click)="handleCancel($event)">
      取消
    </button>
    <button nz-button [nzLoading]="isLoading" [nzType]="'primary'" [nzSize]="'large'" [disabled]="disableSubmit()" (click)="_submitForm($event,validateForm.value)">
      注册
    </button>
  </div>
</div>
