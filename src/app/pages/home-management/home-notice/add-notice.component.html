<nz-content style="margin:0 16px;position:relative;">
  <nz-breadcrumb style="margin:12px 0;">
    <nz-breadcrumb-item>新增公告</nz-breadcrumb-item>
  </nz-breadcrumb>
  <div class="goback clearfix" style="position: absolute;display: inline-block;right:0;top:-5px;">
      <button (click)="goback()" style="float: right;margin-bottom: 24px;" nz-button>返回</button>
  </div>
  <div style="padding:24px; background: #fff; min-height: 360px;">
    <div class="panel">
      <div class="panel-heading">
        <span>基本信息</span>
      </div>
      <div class="panel-body">
        <form nz-form [formGroup]="validateForm">
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">
              <label nz-form-item-required for="title">公告简介</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="validateForm.controls['summary']">
              <nz-input [(ngModel)]="_params.summary" formControlName="summary" [nzSize]="'large'" [nzId]="'summary'" [nzPlaceHolder]="'限50个字符；滚动出现在旺管家APP首页顶部'"></nz-input>
              <div nz-form-explain *ngIf="getFormControl('summary').dirty && getFormControl('summary').hasError('required')">提示：限50个字符；滚动出现在旺管家APP首页顶部</div>
              <div nz-form-explain *ngIf="getFormControl('summary').dirty && (getFormControl('summary').hasError('minlength') || getFormControl('summary').hasError('maxlength'))">30字符以内；字符类型：大小写字母、数字、汉字</div>
            </div>
          </div>
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">
              <label nz-form-item-required  for="title">公告标题</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="validateForm.controls['title']">
              <nz-input [(ngModel)]="_params.title" formControlName="title" [nzSize]="'large'" [nzId]="'title'" [nzPlaceHolder]="'限10个字符；出现在公告内容页顶部'"></nz-input>
              <div nz-form-explain *ngIf="getFormControl('title').dirty && getFormControl('title').hasError('required')">提示：限2-10个字符；出现在公告内容页顶部</div>
              <div nz-form-explain *ngIf="getFormControl('title').dirty && (getFormControl('title').hasError('minlength') || getFormControl('title').hasError('maxlength'))">2-10字符</div>
            </div>
          </div>
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">
              <label nz-form-item-required  for="content">公告内容</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="validateForm.controls['content']">
              <textarea nz-input [(ngModel)]="_params.content" id="content" formControlName="content" name="content" [nzAutosize]="true" placeholder="限300个字符，点击公告标题进入到公告内容页"></textarea>
              <div nz-form-explain *ngIf="getFormControl('content').dirty && getFormControl('content').hasError('required')">限300个字符，点击公告标题进入到公告内容页</div>
              <div nz-form-explain *ngIf="getFormControl('content').dirty && (getFormControl('content').hasError('maxlength'))">限300个字符，点击公告标题进入到公告内容页</div>
            </div>
          </div>
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">
              <label nz-form-item-required for="title">可见区域</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="14">
                <div style="height: 500px; width: 250px; overflow-y: scroll;background-color:#fff;text-align: left;border: 1px solid #ccc;">
                  <custom-cities-select [nodes]="nodes" [isMoreLevel]="true" (csSelectedCites)="csSelectedCites($event)"></custom-cities-select>
                </div>
            </div>
          </div>
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">
              <label nz-form-item-required for="index">时间</label>
            </div>
            <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="validateForm.controls['index']">
                <nz-rangepicker [(ngModel)]="_dateRange" formControlName="_dateRange" nzShowTime [nzFormat]="'YYYY-MM-DD HH:mm:ss'"></nz-rangepicker>
            </div>
          </div>
          <div nz-row nz-form-item>
            <div nz-form-label nz-col [nzSpan]="4">

            </div>
            <div nz-form-control nz-col [nzSpan]="14">
              <div style="float: right;">
                  <button [nzLoading]="_loading" [disabled]="disabledButton()" (click)="save()" nz-button>保存为草稿</button>
                  <button [nzLoading]="_loading" [disabled]="disabledButton()" (click)="push()" nzType="primary" nz-button>发布</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</nz-content>
