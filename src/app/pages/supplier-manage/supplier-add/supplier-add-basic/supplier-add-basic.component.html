<nz-content style="margin:0 16px">
  <div nz-row>
    <div nz-col [nzSpan]="24" style="margin:12px 0;">
      <nz-breadcrumb style="margin:12px 0;">
        <nz-breadcrumb-item>供应商管理</nz-breadcrumb-item>
        <nz-breadcrumb-item>新增供应商</nz-breadcrumb-item>
        <nz-breadcrumb-item>填写基本信息</nz-breadcrumb-item>
      </nz-breadcrumb>
      <button style="float: right" nz-button [nzType]="'primary'" (click)="goBack()">返回</button>
    </div>
  </div>
  <div style="padding:20px;background: #fff">
    <div nz-row>
      <div nz-col [nzSpan]="24">
        <nz-steps [(nzCurrent)]="_current">
          <nz-step [nzTitle]="'填写基本信息'"></nz-step>
          <nz-step [nzTitle]="'添加经营品类范围'"></nz-step>
          <nz-step [nzTitle]="'结算佣金设置'"></nz-step>
        </nz-steps>
      </div>
    </div>
    <div nz-row>
      <div nz-col [nzSpan]="24">
        <form style="padding-top: 0.1px" nz-form [formGroup]="_supplierManagerAddForm" novalidate>
          <div class="wgj-content" style="margin-top: 24px">
            <div class="wgj-section">
              <div class="wgj-section-header">
                <span>基本信息</span>
              </div>
              <div class="wgj-section-content">
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="username">账户名</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['username']">
                      <nz-input [nzSize]="'large'" formControlName="username" [nzId]="'username'" [(ngModel)]="_reqParam.username"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('username').dirty && getFormControl('username').hasError('required')">请填写账户名</div>
                      <div nz-form-explain *ngIf="getFormControl('username').dirty && getFormControl('username').hasError('account')">请填写正确账户名，6~56个字符，限字母、数字、下划线输入</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="serviceName">供应商（店铺）名称</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['serviceName']">
                      <nz-input [nzSize]="'large'" formControlName="serviceName" [nzId]="'serviceName'" [(ngModel)]="_reqParam.serviceName"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('serviceName').dirty && getFormControl('serviceName').hasError('required')">请填写供应商（店铺）名称</div>
                      <div nz-form-explain *ngIf="getFormControl('serviceName').dirty && getFormControl('serviceName').hasError('serviceName')">请填写正确供应商（店铺）名称，2~64个字符，限字母、数字、汉字、下划线</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="serviceType">类型</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14">
                      <nz-radio-group formControlName="serviceType">
                        <label nz-radio [nzValue]="item.id" *ngFor="let item of _findType">
                          <span>{{item.name}}</span>
                        </label>
                      </nz-radio-group>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="own">标签</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14">
                      <nz-radio-group formControlName="own" [(ngModel)]="_reqParam.isOwn">
                        <label nz-radio [nzValue]="item.id" *ngFor="let item of _ownList">
                          <span>{{item.name}}</span>
                        </label>
                      </nz-radio-group>
                  </div>
                </div>
              </div> 
            </div>
            <div class="wgj-section">
              <div class="wgj-section-header">
                <span>店主信息／负责人信息</span>
              </div>
              <div class="wgj-section-content">
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="name">姓名</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['name']">
                      <nz-input [nzSize]="'large'" formControlName="name" [nzId]="'name'" [(ngModel)]="_reqParam.name"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('required')">请填写姓名</div>
                      <div nz-form-explain *ngIf="getFormControl('name').dirty && getFormControl('name').hasError('name')">请填写正确姓名，2~16个字符,限字母、汉字</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label for="tel">固定电话</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['tel']">
                      <nz-input [nzSize]="'large'" formControlName="tel" [nzId]="'tel'" [(ngModel)]="_reqParam.tel"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('tel').dirty && getFormControl('tel').hasError('tel')">请填写正确固定电话，8~13个数字</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="phone">手机号码</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['phone']">
                      <nz-input [nzSize]="'large'" formControlName="phone" [nzId]="'phone'" [nzPlaceHolder]="'一经填写暂无法修改，请确定后再输入'" [(ngModel)]="_reqParam.phone"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('phone').dirty && getFormControl('phone').hasError('required')">请填写手机号码</div>
                      <div nz-form-explain *ngIf="getFormControl('phone').dirty && getFormControl('phone').hasError('phone')">请填写正确手机号码</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="idCard">身份证</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['idCard']">
                      <nz-input [nzSize]="'large'" formControlName="idCard" [nzId]="'idCard'" [(ngModel)]="_reqParam.idCard"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('idCard').dirty && getFormControl('idCard').hasError('required')">请填写身份证号码</div>
                      <div nz-form-explain *ngIf="getFormControl('idCard').dirty && getFormControl('idCard').hasError('idCard')">请填写正确身份证号</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label for="qq">QQ</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['qq']">
                      <nz-input [nzSize]="'large'" formControlName="qq" [nzId]="'qq'" [(ngModel)]="_reqParam.qq"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('qq').dirty && getFormControl('qq').hasError('qq')">请填写正确QQ号,最小5位数,最大15位数,开头不能为0</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="email">邮箱</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['email']">
                      <nz-input [nzSize]="'large'" formControlName="email" [nzId]="'email'" [(ngModel)]="_reqParam.email"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('email').dirty && getFormControl('email').hasError('required')">请填写邮箱</div>
                      <div nz-form-explain *ngIf="getFormControl('email').dirty && getFormControl('email').hasError('email')">请填写正确邮箱</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="receiverPhone">接收订单手机号</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['receiverPhone']">
                      <nz-input [nzSize]="'large'" formControlName="receiverPhone" [nzId]="'receiverPhone'" [(ngModel)]="_reqParam.receiverPhone"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('receiverPhone').dirty && getFormControl('receiverPhone').hasError('required')">请填写接收订单手机号</div>
                      <div nz-form-explain *ngIf="getFormControl('receiverPhone').dirty && getFormControl('receiverPhone').hasError('receiverPhone')">请按要求填写手机号</div>
                  </div>
                  <div nz-col [nzSpan]="14" [nzPush]="5" style="color: #bfbfbf">ps：供应商来订单后根据上述手机号码进行短信通知，添加多个使用“/”隔开，最多10个手机号码</div>
                </div>
              </div> 
            </div>
            <div class="wgj-section">
              <div class="wgj-section-header">
                <span>店铺／公司信息</span>
              </div>
              <div class="wgj-section-content">
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required>所在地</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14">
                      <nz-cascader
                      nzChangeOnSelect
                      formControlName="adcode"
                      [nzPlaceHolder]="'选择省、市、区'"
                      [nzSize]="'large'"
                      [nzValueProperty]="'id'"
                      (nzLoad)="loadData($event)">
                    </nz-cascader>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label nz-form-item-required for="address">详细地址</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['address']">
                      <nz-input [nzSize]="'large'" formControlName="address" [nzId]="'address'" [(ngModel)]="_reqParam.address"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('address').dirty && getFormControl('address').hasError('required')">请填写详细地址</div>
                      <div nz-form-explain *ngIf="getFormControl('address').dirty && getFormControl('address').hasError('address')">请填写正确地址，1~128个字符</div>
                  </div>
                </div>
                <div nz-row nz-form-item>
                  <div nz-form-label nz-col [nzSpan]="5">
                    <label for="postalCode">邮政编码</label>
                  </div>
                  <div nz-form-control nz-col [nzSpan]="14" nzHasFeedback [nzValidateStatus]="_supplierManagerAddForm.controls['postalCode']">
                      <nz-input [nzSize]="'large'" formControlName="postalCode" [nzId]="'postalCode'" [(ngModel)]="_reqParam.postalCode"></nz-input>
                      <div nz-form-explain *ngIf="getFormControl('postalCode').dirty && getFormControl('postalCode').hasError('postalCode')">请填写正确邮政编码,6个字符</div>
                  </div>
                </div>
                
                <div nz-row nz-form-item>
                  <div nz-col [nzSpan]="24">
                    <div nz-row>
                      <div nz-form-label nz-col [nzSpan]="5">
                        <label nz-form-item-required>营业执照</label>
                      </div>
                      <div nz-col [nzSpan]="14">
                        <nz-upload
                          [nzAction]="_uploadUrl"
                          [nzListType]="'picture-card'"
                          [(nzFileList)]="_fileLicenseList"
                          [nzShowButton]="_fileLicenseList.length < 10"
                          [nzSize]="1024"
                          [nzPreview]="handlePreview"
                          (nzChange)="licenseLoadChange($event)">
                            <i class="anticon anticon-plus"></i>
                            <div class="ant-upload-text">导入营业执照</div>
                        </nz-upload>
                      </div>
                    </div>
                  </div>
                  <nz-modal [nzVisible]="_previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="_previewVisible=false">
                  </nz-modal>
                  <div nz-col [nzSpan]="24">
                      <div nz-row>
                          <div nz-col [nzSpan]="14" [nzPush]="5" style="color: #bfbfbf">ps：最多10张，每张图片大小不超过1M，建议尺寸：400*400px或640*400px<a href="http://www.tuhaokuai.com/image">(图片压缩工具)</a></div>
                      </div>
                  </div>
                </div>
          
                <div nz-row nz-form-item>
                  <div nz-col [nzSpan]="24">
                    <div nz-row>
                      <div nz-form-label nz-col [nzSpan]="5">
                        <label nz-form-item-required>店铺logo</label>
                      </div>
                      <div nz-col [nzSpan]="14">
                        <nz-upload
                          [nzAction]="_uploadUrl"
                          [nzListType]="'picture-card'"
                          [(nzFileList)]="_fileLogoList"
                          [nzShowButton]="_fileLogoList.length < 1"
                          [nzSize]="1024"
                          [nzPreview]="handlePreview"
                          (nzChange)="logoLoadChange($event)">
                            <i class="anticon anticon-plus"></i>
                            <div class="ant-upload-text">导入店铺logo</div>
                        </nz-upload>
                      </div>
                    </div>
                  </div>
                  <nz-modal [nzVisible]="_previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="_previewVisible=false">
                  </nz-modal>
                  <div nz-col [nzSpan]="24">
                      <div nz-row>
                          <div nz-col [nzSpan]="14" [nzPush]="5" style="color: #bfbfbf">ps：最多1张，每张图片大小不超过1M，建议尺寸：400*400px或640*400px<a href="http://www.tuhaokuai.com/image">(图片压缩工具)</a></div>
                      </div>
                  </div>
                </div>
                <ng-template #modalContent>
                  <img [src]="_previewImage" [ngStyle]="{ 'width': '100%' }" />
                </ng-template>
              </div> 
            </div>
          </div>
          <div nz-row>
            <div nz-col [nzSpan]="24">
              <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="_supplierManagerAddForm.invalid || _reqParam.businessLicenseImgs.length == 0 || !_reqParam.logoImg || _supplierManagerAddForm.get('adcode').value.length != 3" [nzLoading]="_saveLoading" (click)="_submitForm()">保存</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <nz-back-top></nz-back-top>
</nz-content>



